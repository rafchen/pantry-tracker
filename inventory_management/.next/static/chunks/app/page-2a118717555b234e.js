(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{1177:function(e,t,n){Promise.resolve().then(n.bind(n,4701))},4701:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Z}});var a=n(7437),i=n(2265),r=n(8620),o=n(1326),s=n(511),l=n(8700),d=n(7738),c=n(5965),h=n(8433),m=n(5236),u=n(9842),p=n(7175);let x=(0,m.ZF)({apiKey:"AIzaSyBU3Dett4M5ITgVywL0B-JZwW2Sz3OVEvo",authDomain:"inventory-management-3bb59.firebaseapp.com",projectId:"inventory-management-3bb59",storageBucket:"inventory-management-3bb59.appspot.com",messagingSenderId:"769408448635",appId:"1:769408448635:web:7a0e0f860bf67d0d408ade",measurementId:"G-KB2HZB8MZC"}),g=(0,u.ad)(x);(0,p.Gb)()&&(0,p.IH)(x);let f=new(n(973)).$D("AIzaSyD8tLeg83D7ZfsXsLr25ZwX-cTzIR3Te5A").getGenerativeModel({model:"gemini-1.5-pro"}),y={temperature:.85,topP:.95,topK:64,maxOutputTokens:8192,responseMimeType:"text/plain"},v={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"white",border:"2px solid #000",boxShadow:24,p:4,display:"flex",flexDirection:"column",gap:3};function b(e){let{open:t,handleClose:n,addItem:i,itemName:h,setItemName:m,itemQuantity:u,setItemQuantity:p}=e;return(0,a.jsx)(r.Z,{open:t,onClose:n,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,a.jsxs)(o.Z,{sx:v,children:[(0,a.jsx)(s.Z,{id:"modal-modal-title",variant:"h6",component:"h2",color:"black",children:"Add Item"}),(0,a.jsxs)(l.Z,{width:"100%",direction:"column",spacing:2,children:[(0,a.jsx)(d.Z,{id:"outlined-basic-item",label:"Item",variant:"outlined",fullWidth:!0,value:h,onChange:e=>m(e.target.value)}),(0,a.jsx)(d.Z,{id:"outlined-basic-quantity",label:"Quantity",variant:"outlined",type:"number",fullWidth:!0,value:u,onChange:e=>p(e.target.value)}),(0,a.jsx)(c.Z,{variant:"contained",onClick:()=>{i(h,u),m(""),p(""),n()},children:"Add"})]})]})})}function j(e){let{open:t,handleClose:n,removeItem:i,itemName:h,setItemName:m,itemQuantity:u,setItemQuantity:p}=e;return(0,a.jsx)(r.Z,{open:t,onClose:n,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,a.jsxs)(o.Z,{sx:v,children:[(0,a.jsx)(s.Z,{id:"modal-modal-title",variant:"h6",component:"h2",color:"black",children:"Remove Item"}),(0,a.jsxs)(l.Z,{width:"100%",direction:"column",spacing:2,children:[(0,a.jsx)(d.Z,{id:"outlined-basic-item",label:"Item",variant:"outlined",fullWidth:!0,value:h,onChange:e=>m(e.target.value)}),(0,a.jsx)(d.Z,{id:"outlined-basic-quantity",label:"Quantity",variant:"outlined",type:"number",fullWidth:!0,value:u,onChange:e=>p(e.target.value)}),(0,a.jsx)(c.Z,{variant:"contained",onClick:()=>{i(h,u),m(""),p(""),n()},children:"Remove"})]})]})})}function Z(){let[e,t]=(0,i.useState)([]),[n,r]=(0,i.useState)([]),[m,p]=(0,i.useState)(""),[x,v]=(0,i.useState)(""),[Z,w]=(0,i.useState)(!1),[I,C]=(0,i.useState)(!1),[E,S]=(0,i.useState)(""),[k,q]=(0,i.useState)(""),A=async()=>{try{let e=(0,u.IO)((0,u.hJ)(g,"inventory")),n=(await (0,u.PL)(e)).docs.map(e=>({name:e.id,...e.data()}));t(n),r(n)}catch(e){console.error("Error updating inventory:",e)}};(0,i.useEffect)(()=>{A()},[]);let N=async(e,t)=>{try{let n=(0,u.JU)((0,u.hJ)(g,"inventory"),e),a=await (0,u.QT)(n),i=parseInt(t,10);if(a.exists()){let{quantity:e}=a.data();await (0,u.pl)(n,{quantity:e+i})}else await (0,u.pl)(n,{quantity:i});await A()}catch(e){console.error("Error adding item:",e)}},D=async(e,t)=>{try{let n=(0,u.JU)((0,u.hJ)(g,"inventory"),e),a=await (0,u.QT)(n),i=parseInt(t,10);if(a.exists()){let{quantity:e}=a.data();e<=i?await (0,u.oe)(n):await (0,u.pl)(n,{quantity:e-i})}await A()}catch(e){console.error("Error removing item:",e)}},P=async()=>{try{let e=n.map(e=>e.name),t="I have the following ingredients: ".concat(e.join(", "),". Can you suggest some recipes I can make? For each recipe, please list:\n      1. Ingredients required.\n      2. Instructions.\n      3. Please format it in a way that's appealing to the client.\n      Additionally, if there are any ingredients I don't have, please list those as well."),a=f.startChat({generationConfig:y,history:[]}),i=await a.sendMessage(t);if(i&&i.response&&"function"==typeof i.response.text){let e=await i.response.text();e.trim()?q(e):q("No recipes found based on the provided ingredients.")}else console.error("Unexpected response format:",i),q("No recipes found.")}catch(e){console.error("Error generating recommendations:",e),e.response?(console.error("Error response data:",e.response.data),console.error("Error response status:",e.response.status),console.error("Error response headers:",e.response.headers)):e.request?console.error("Error request data:",e.request):console.error("Error message:",e.message),q("Error generating recommendations. Please try again later.")}};return(0,a.jsxs)(o.Z,{width:"100vw",height:"100vh",display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center",gap:2,overflow:"auto",padding:2,children:[(0,a.jsx)(b,{open:Z,handleClose:()=>w(!1),addItem:N,itemName:x,setItemName:v,itemQuantity:m,setItemQuantity:p}),(0,a.jsx)(j,{open:I,handleClose:()=>C(!1),removeItem:D,itemName:x,setItemName:v,itemQuantity:m,setItemQuantity:p}),(0,a.jsxs)(h.ZP,{container:!0,justifyContent:"center",spacing:2,children:[(0,a.jsx)(h.ZP,{item:!0,children:(0,a.jsx)(c.Z,{variant:"contained",onClick:()=>w(!0),size:"large",children:"Add New Item"})}),(0,a.jsx)(h.ZP,{item:!0,children:(0,a.jsx)(c.Z,{variant:"outlined",onClick:()=>C(!0),size:"large",children:"Remove Item"})}),(0,a.jsx)(h.ZP,{item:!0,xs:12,md:6,children:(0,a.jsx)(d.Z,{id:"search-bar",label:"Search Items",variant:"outlined",fullWidth:!0,value:E,onChange:t=>{let n=t.target.value.toLowerCase();S(n),r(e.filter(e=>e.name.toLowerCase().includes(n)))},size:"small"})})]}),(0,a.jsxs)(o.Z,{border:"1px solid #333",mt:2,width:"90%",height:"60vh",overflow:"auto",children:[(0,a.jsx)(o.Z,{width:"100%",bgcolor:"#ADD8E6",display:"flex",justifyContent:"center",alignItems:"center",p:2,children:(0,a.jsx)(s.Z,{variant:"h4",color:"#333",textAlign:"center",children:"Inventory Items"})}),(0,a.jsxs)(l.Z,{width:"100%",children:[(0,a.jsxs)(l.Z,{direction:"row",spacing:4,p:2,bgcolor:"#f5f5f5",sx:{borderBottom:"2px solid #333"},children:[(0,a.jsx)(s.Z,{variant:"h6",color:"#333",flex:"1",fontWeight:"bold",children:"Item"}),(0,a.jsx)(s.Z,{variant:"h6",color:"#333",flex:"1",textAlign:"center",fontWeight:"bold",children:"Quantity"})]}),0===n.length?(0,a.jsx)(o.Z,{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",children:(0,a.jsx)(s.Z,{variant:"h6",color:"textSecondary",children:"No items found."})}):n.map(e=>(0,a.jsxs)(l.Z,{direction:"row",spacing:4,p:2,sx:{borderBottom:"1px solid #ccc"},children:[(0,a.jsx)(s.Z,{variant:"h6",flex:"1",children:e.name}),(0,a.jsx)(s.Z,{variant:"h6",flex:"1",textAlign:"center",children:e.quantity})]},e.name))]})]}),(0,a.jsxs)(o.Z,{mt:2,display:"flex",flexDirection:"column",alignItems:"center",width:"90%",height:"30vh",overflow:"auto",children:[(0,a.jsx)(c.Z,{variant:"contained",onClick:P,disabled:0===n.length,size:"large",children:"Generate Recipe Recommendations"}),k&&(0,a.jsxs)(o.Z,{mt:2,width:"100%",maxHeight:"100%",overflow:"auto",p:2,bgcolor:"#f9f9f9",children:[(0,a.jsx)(s.Z,{variant:"h5",mb:2,children:"Recommended Recipes:"}),(0,a.jsx)(s.Z,{variant:"body1",whiteSpace:"pre-line",children:k})]})]})]})}}},function(e){e.O(0,[358,244,971,23,744],function(){return e(e.s=1177)}),_N_E=e.O()}]);