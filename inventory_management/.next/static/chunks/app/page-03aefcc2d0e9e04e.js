(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{1177:function(e,t,n){Promise.resolve().then(n.bind(n,4701))},4701:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return E}});var r=n(7437),o=n(2265),a=n(8620),i=n(1326),s=n(511),l=n(8700),c=n(7738),d=n(5965),h=n(8433),p=n(5236),m=n(9842),u=n(7175);let x=(0,p.ZF)({apiKey:"AIzaSyBU3Dett4M5ITgVywL0B-JZwW2Sz3OVEvo",authDomain:"inventory-management-3bb59.firebaseapp.com",projectId:"inventory-management-3bb59",storageBucket:"inventory-management-3bb59.appspot.com",messagingSenderId:"769408448635",appId:"1:769408448635:web:7a0e0f860bf67d0d408ade",measurementId:"G-KB2HZB8MZC"}),g=(0,m.ad)(x);(0,u.Gb)()&&(0,u.IH)(x);var f=n(2170),y=n.n(f);let{GoogleGenerativeAI:v,HarmCategory:j,HarmBlockThreshold:w}=n(7839),b=new v("AIzaSyD8tLeg83D7ZfsXsLr25ZwX-cTzIR3Te5A").getGenerativeModel({model:"gemini-1.5-pro"}),Z={temperature:.85,topP:.95,topK:64,maxOutputTokens:8192,responseMimeType:"text/plain"},I={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"white",border:"2px solid #000",boxShadow:24,p:4,display:"flex",flexDirection:"column",gap:3};function C(e){let{open:t,handleClose:n,addItem:o,itemName:h,setItemName:p}=e;return(0,r.jsx)(a.Z,{open:t,onClose:n,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,r.jsxs)(i.Z,{sx:I,children:[(0,r.jsx)(s.Z,{id:"modal-modal-title",variant:"h6",component:"h2",color:"black",children:"Add Item"}),(0,r.jsxs)(l.Z,{width:"100%",direction:"row",spacing:2,children:[(0,r.jsx)(c.Z,{id:"outlined-basic",label:"Item",variant:"outlined",fullWidth:!0,value:h,onChange:e=>p(e.target.value)}),(0,r.jsx)(d.Z,{variant:"outlined",onClick:()=>{o(h),p(""),n()},children:"Add"})]})]})})}function E(){let[e,t]=(0,o.useState)([]),[n,a]=(0,o.useState)([]),[p,u]=(0,o.useState)(!1),[x,f]=(0,o.useState)(""),[v,j]=(0,o.useState)(""),[w,I]=(0,o.useState)(""),E=async()=>{try{let e=(0,m.IO)((0,m.hJ)(g,"inventory")),n=(await (0,m.PL)(e)).docs.map(e=>({name:e.id,...e.data()}));t(n),a(n)}catch(e){console.error("Error updating inventory:",e)}};(0,o.useEffect)(()=>{E()},[]);let k=async e=>{try{let t=(0,m.JU)((0,m.hJ)(g,"inventory"),e),n=await (0,m.QT)(t);if(n.exists()){let{quantity:e}=n.data();await (0,m.pl)(t,{quantity:e+1})}else await (0,m.pl)(t,{quantity:1});await E()}catch(e){console.error("Error adding item:",e)}},A=async e=>{try{let t=(0,m.JU)((0,m.hJ)(g,"inventory"),e),n=await (0,m.QT)(t);if(n.exists()){let{quantity:e}=n.data();1===e?await (0,m.oe)(t):await (0,m.pl)(t,{quantity:e-1})}await E()}catch(e){console.error("Error removing item:",e)}},S=y()(t=>{let n=t.target.value.toLowerCase();j(n),a(e.filter(e=>e.name.toLowerCase().startsWith(n)))},300),D=async()=>{try{let e=n.map(e=>e.name),t="I have the following ingredients: ".concat(e.join(", "),". Can you suggest some recipes I can make? For each recipe, please list:\n      1. Ingredients required.\n      2. Instructions.\n      Additionally, if there are any ingredients I don't have, please list those as well.");console.log("Generating recipes with ingredients:",e);let r=b.startChat({generationConfig:Z,history:[]});console.log("Chat session started");let o=await r.sendMessage(t);if(console.log("API response received:",o),o&&o.response&&"function"==typeof o.response.text){let e=o.response.text();e.trim()?I(e):I("No recipes found based on the provided ingredients.")}else console.error("Unexpected response format:",o),I("No recipes found.")}catch(e){console.error("Error generating recommendations:",e),e.response?(console.error("Error response data:",e.response.data),console.error("Error response status:",e.response.status),console.error("Error response headers:",e.response.headers)):e.request?console.error("Error request data:",e.request):console.error("Error message:",e.message),I("Error generating recommendations. Please try again later.")}};return(0,r.jsxs)(i.Z,{width:"100vw",height:"100vh",display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center",gap:2,children:[(0,r.jsx)(C,{open:p,handleClose:()=>u(!1),addItem:k,itemName:x,setItemName:f}),(0,r.jsxs)(h.ZP,{container:!0,justifyContent:"center",spacing:2,children:[(0,r.jsx)(h.ZP,{item:!0,children:(0,r.jsx)(d.Z,{variant:"contained",onClick:()=>u(!0),children:"Add New Item"})}),(0,r.jsx)(h.ZP,{item:!0,children:(0,r.jsx)(c.Z,{id:"search-bar",label:"Search Items",variant:"outlined",fullWidth:!0,value:v,onChange:S})})]}),(0,r.jsxs)(i.Z,{border:"1px solid #333",mt:2,children:[(0,r.jsx)(i.Z,{width:"800px",bgcolor:"#ADD8E6",display:"flex",justifyContent:"center",alignItems:"center",p:2,children:(0,r.jsx)(s.Z,{variant:"h4",color:"#333",textAlign:"center",children:"Inventory Items"})}),(0,r.jsx)(l.Z,{width:"800px",height:"600px",overflow:"auto",children:0===n.length?(0,r.jsx)(i.Z,{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",children:(0,r.jsx)(s.Z,{variant:"h6",color:"textSecondary",children:"No items found."})}):n.map(e=>(0,r.jsxs)(l.Z,{direction:"row",justifyContent:"space-between",p:2,sx:{borderBottom:"1px solid #ccc"},children:[(0,r.jsx)(s.Z,{variant:"h6",children:e.name}),(0,r.jsxs)(l.Z,{direction:"row",spacing:2,children:[(0,r.jsx)(d.Z,{variant:"outlined",onClick:()=>A(e.name),children:"Remove"}),(0,r.jsx)(s.Z,{variant:"h6",children:e.quantity}),(0,r.jsx)(d.Z,{variant:"outlined",onClick:()=>k(e.name),children:"Add"})]})]},e.name))})]}),(0,r.jsxs)(i.Z,{mt:2,display:"flex",flexDirection:"column",alignItems:"center",width:"100%",children:[(0,r.jsx)(d.Z,{variant:"contained",onClick:D,disabled:0===n.length,children:"Generate Recipe Recommendations"}),w&&(0,r.jsxs)(i.Z,{width:"800px",bgcolor:"#FFFAFA",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",p:2,mt:2,border:"1px solid #ccc",children:[(0,r.jsx)(s.Z,{variant:"h6",color:"#333",children:"Recipe Recommendations:"}),(0,r.jsx)(s.Z,{variant:"body1",color:"#333",children:w})]})]})]})}}},function(e){e.O(0,[358,256,971,23,744],function(){return e(e.s=1177)}),_N_E=e.O()}]);